## Задача

По данному регулярному выражению в обратной польской записи, букве `x` и числу `k` необходимо сообщить длину минимального слова, принимаемого регулярным выражением, начинающегося с префикса `x^k`

## Решение
### Разбор регулярного выражения

С обратной польской записью все просто - для её разбора достаточно лишь стека. В моем коде представлен общий интерфейс, позволяющий писать алгоритмы для регулярных выражений, основывающиеся на рекурсии по построению - достаточно предоставить логику предоставления результата для пустого слова, единичной буквы и логику его преобразования для операций

### Алгоритм решения задачи

Кажется, у олимпиадников это зовется "ДП по поддеревьям". Введем некоторую структуру, соответствующую регулярному выражению, позволяющую ответить на вопрос в задаче и поймем, как ее преобразовывать под действием операций.

#### Структура

Для всех `n` от `0` до `k` включительно хотим знать:

- Длину минимального слова с префиксом `x^n`, принимаемого регулярным выражением
- Принимает ли регулярное выражение слово `x^n`

Тогда посчитав такую структуру для всего выражения, положив `n=k` в первом пункте структуры, мы узнаем ответ на задачу

#### Листовые значения

- Для выражения-пустого слова - принимается только слово и префикс `x^0` длины 0.
- Для выражения-единичной буквы - она является подходящим словом с префиксом `x^0` длины 1. Если, к тому же, она совпадает с буквой `x` (и `k` не ноль), то еще принимается слово и префикс `x^1` длины 1

#### Операции
Обсудим, как преобразовываются структуры под действием операций

##### Объединение
Тут все просто - берем минимальную длину в первом пункте структуры, во втором, очевидно, достаточно, чтобы слово принималось лишь одним операндом
##### Конкатенация
Вся сложность здесь. Если слово вида `x^k.w` принимается конкатенацией двух регулярных выражений, значит, какая-то его часть принимается левым выражением, другая - правым. Зафиксируем `n` и поймем, как посчитать результат для него

- Во втором пункте структуры - просто переберем, сколько букв `x` соответствует правому, а сколько левому выражениям. Если для хотя бы одного разбиения `n=c+d` левое выражение принимает `x^c`, а правое - `x^d`, конкатенация, очевидно, принимает `x^n`
- В первом пункте структуры - если такое слово есть, то возможно несколько ситуаций - нужно разобрать их все и выбрать лучший результат. Может быть, что все буквы `x` и часть слова `w` принимаются левым выражением. Тогда наилучший результат, очевидно, достигается, если взять кратчайшее слова вида `x^n.w` в левом выражении и любое кратчайшее слово в правом. Обе величины нам известны из структур, соответствующих левому и правому выражениям (просто кратчайшее слово <=> с префиксом `x^0`). Оставшийся случай - левому выражению соответствует некоторое число букв `x`. Переберем это число - пусть `n=c+d`. Тогда если `x^c` принимается левым выражением, то достаточно узнать минимальную длину слова вида `x^d.w`, принимаемого правым выражением и сложить ее с `c`. Опять же, возьмем наилучший результат

Таким образом, мы научились полностью считать структуру для конкатенации по структурам для операндов.
##### Звездочка
Тут я немного схалявил. Почти очевидно, что в нашей задаче звездочка не раскроется больше чем `k` раз. Действительно - если под звездочкой есть слово вида `x^n`, то для решения задачи его не имеет смысла дублировать больше чем `k` раз. Если же слова `x^n` под звездочкой нет, то она нам не интересна с точки зрения букв `x` и нас от нее может интересовать лишь кратчайшее слово. Короче говоря, наша структура не улучшится от дальнейшего раскрытия звездочек и ее можно раскрыть просто как `1+x+x.x+ ... +x^k`.

#### Корректность

Корректность алгоритма вытекает из корректности результата для листовых выражений и корректности логики пересчета. Ее корректность была обоснована выше.

#### Время работы

Обьединение двух структур работает за `O(k)`, конкатенация за `O(k^2)` (перебор разбиения для каждого `n` за линию), звездочка за `O(k^2+k^3)` (`k` конкатенаций для возведения в степень и столько же обьединений). Итого время работы можно оценить сверху как `O(|a|*(k^2+k^3))`, где `|a|` - длина регулярного выражения.
